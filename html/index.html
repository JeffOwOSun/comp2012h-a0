<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>COMP2012H: COMP2012H Programming Assignment 0, Fall 2014</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>COMP2012H Programming Assignment 0, Fall 2014</h1>
<p>
<b>Author:</b> <a href="http://www.cs.ust.hk/~dekai/">Dekai Wu</a><p>
<b>Date:</b> Due 2014.09.16 at 23:00 by CASS<p>
<b>Download:</b> <a href="http://www.cs.ust.hk/~dekai/2012H/assignments/a0.tar.gz">http://www.cs.ust.hk/~dekai/2012H/assignments/a0.tar.gz</a><p>
<b>Assignment page:</b> <a href="http://www.cs.ust.hk/~dekai/2012H/assignments/a0/html/">http://www.cs.ust.hk/~dekai/2012H/assignments/a0/html/</a><p>
<b>Course page:</b> <a href="http://www.cs.ust.hk/~dekai/2012H/">http://www.cs.ust.hk/~dekai/2012H/</a><p>
<h3>Your assignment</h3>
<p>
You've been assigned to implement a <em>linked list</em> data structure. Specifically, you will implement a simple library supporting <a href="https://en.wikipedia.org/wiki/Linked_list#Singly_linked_list"><em>singly linked lists</em></a>, which other programs will then use for purposes that you do not have to care about.<p>
If there is ever any error in the way that your library is used, your library functions should print the string <code>ERROR</code> on standard error (<code>cerr &lt;&lt; "ERROR"</code>), and call <code>exit(1)</code> to terminate program execution.<p>
As a starting point, you are being given top-level requirements in the form of a skeleton implmentation containing the desired API and certain required details of the implementation approach. Download the package at the top of this page, then:<p>
<code>$ tar xzf a0.tar.gz</code> <em>// unpack the archive</em><br>
 <code>$ cd a0</code><br>
 <code>$ make</code><br>
 <code>g++ -c <a class="el" href="main_8cpp.html">main.cpp</a> -o main.o</code><br>
 <code>g++ -c <a class="el" href="linkedlist_8cpp.html">linkedlist.cpp</a> -o linkedlist.o</code><br>
 <code>g++ main.o linkedlist.o -o main</code><br>
 <code>$ main</code><br>
 <code>Bus error: 10</code><p>
You will see the test program crash, since you haven't implemented the library functions yet; only dummy functions are in the code you've been given.<p>
You'll need to implement: <ul>
<li>
<code>Cell* <a class="el" href="linkedlist__internals_8hpp.html#79dba661f12d747a65686d83911903e4" title="Make an int cell.">make_int(const int i)</a></code> returns a newly constructed int cell, i.e., a leaf node initialized to hold the int value <code>i</code> </li>
<li>
<code>Cell* <a class="el" href="linkedlist__internals_8hpp.html#416fa9c212236765cac460937bce264b" title="Make a double cell.">make_double(const double d)</a></code> returns a newly constructed double cell, i.e., a leaf node initialized to hold the double value <code>d</code> </li>
<li>
<code>Cell* <a class="el" href="linkedlist__internals_8hpp.html#8403dcb281c8bac9a690c6b86c00a8c7" title="Make a symbol cell.">make_symbol(const char* const s)</a></code> returns a newly constructed symbol cell, i.e., a leaf node initialized to hold the symbol name <code>s</code> </li>
<li>
<code>Node* <a class="el" href="linkedlist__internals_8hpp.html#740de17e2fdcad9a9f92f8124dcbb40b" title="Make a linked list node.">make_node(Cell* const my_elem, Node* const my_next)</a></code> returns a newly constructed linked list node, i.e., a node initialized to hold the two pointers <code>my_elem</code> and <code>my_next</code> </li>
</ul>
<ul>
<li>
<code>bool intp(Cell* const c)</code> returns true iff the cell pointed to by <code>c</code> is an int cell </li>
<li>
<code>bool doublep(Cell* const c)</code> returns true iff the cell pointed to by <code>c</code> is a double cell </li>
<li>
<code>bool symbolp(Cell* const c)</code> returns true iff the cell pointed to by <code>c</code> is a symbol cell </li>
</ul>
<ul>
<li>
<code>int get_int(Cell* const c)</code> returns the value in the int cell pointed to by <code>c</code> (error if <code>c</code> is not an int cell) </li>
<li>
<code>double get_double(Cell* const c)</code> returns the value in the double cell pointed to by <code>c</code> (error if <code>c</code> is not a double cell) </li>
<li>
<code>string get_symbol(Cell* const c)</code> returns the value in the string cell pointed to by <code>c</code> (error if <code>c</code> is not a string cell) </li>
<li>
<code>Cell* get_elem(Node* const n)</code> returns a pointer to the data held by this node n </li>
<li>
<code>Cell* get_next(Node* const n)</code> returns a pointer to the next node in the linked list </li>
</ul>
<ul>
<li>
<code>ostream&amp; operator&lt;&lt;(ostream&amp; os, Node* const n)</code> prints the list pointed to by <code></code> <p>
<code></code> to the output stream <code>os</code>, in parentheses  </li>
</ul>
<p>
Notice that even though these are just ordinary functions (not member functions of a class), nevertheless this set of functions constitutes an interface for an abstract data type; we'll discuss more background on this particular ADT below. The way that <code><a class="el" href="Cell_8hpp.html">Cell.hpp</a></code> specifies the ADT interface is nice because it makes very few assumptions about how the concrete implementation might be done. (Good object-oriented programming style does <em>not</em> necessarily require using classes! For example, see Scott Myer's article <a href="http://www.ddj.com/dept/cpp/184401197">How Non-Member Functions Improve Encapsulation</a>.)<p>
The file that you received just connects all the functions to a dummy example implementation of the ADT that makes use of a super-simple, incomplete <code><a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a></code> class. This dummy example implementation isn't actually capable of building a list data structure with pointers and nodes.<p>
<h3>Implementing the linked list ADT</h3>
<p>
In this assignment, cells can hold three kinds of data: int, double, and symbol. You need a way to store any of these types of values in your cells. How do you do this efficiently?<p>
The obvious naive way is just to have four data members: <pre>struct <a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a> {
...
  int int_m;
  double double_m; 
  char* symbol_m;
};</pre><p>
But this is a terribly inefficient waste of memory. Any instance of a <code><a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a></code> will only be using one of these data members. So a better way is to use a <em>union</em>: <pre>struct <a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a> {
  union {
    int int_m;
    double double_m; 
    char* symbol_m;
  };
};</pre><p>
Unions exist in both C and C++. A union is sort of like a struct, except that a struct provides memory space to simultaneously store all its members, whereas a union provides memory space to store only one of its members at a time. So this way, we won't waste memory space.<p>
The only problem is: when you're using a union, how do you know <em>which</em> of the data members is the valid one? C++ won't tell you; it is your program's own responsibility to keep track of this. If you don't, you can easily create horrible bugs. For example:<p>
<code>Cell* c = new <a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a>;</code><br>
 <code>c-&gt;double_m = 2.718;</code><br>
 <code>cout &lt;&lt; c-&gt;int_m;</code> <em>// whoops! will print out a garbage int</em><br>
 <code>cout &lt;&lt; c-&gt;symbol_m;</code> <em>// whoops! will either seg fault or do wildly unpredictable things</em><p>
To keep track of which member in the union is currently valid, you should use what's known as a <em>tagged union</em> or <em>discriminated union</em> approach: <pre>struct <a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a> {
  enum TypeTag {type_int, type_double, type_symbol};
  TypeTag tag_m;
  union {
    int int_m;
    double double_m; 
    char* symbol_m;
  };
};</pre><p>
Now you can write your code so that you make sure that the <code>tag_m</code> always holds an up-to-date value indicating which of the union members is valid at the current time.<p>
<h3>Important reminders</h3>
<p>
You must follow the design approach outlined in this document. Do <em>not</em> just implement the required functionality using a different design. Your proper <em>software engineering</em> skills are being graded.<p>
Do <em>not</em> use virtual functions or templates in this assignment. This assignment is about static OO support in C++. (You'll get a chance to use dynamic OO polymorphism and templates in the following assignments...)<p>
Do <em>not</em> edit the files <code><a class="el" href="Cell_8hpp.html">Cell.hpp</a></code>, <code><a class="el" href="Node_8hpp.html">Node.hpp</a></code>, or <code><a class="el" href="linkedlist_8hpp.html">linkedlist.hpp</a></code>. The programming assignments are mini-exercises in how multiple programmers are supposed to interact and communicate in the real world; these files are <em>owned</em> and <em>maintained</em> by the other author(s).<p>
You may need to add things to <code><a class="el" href="Cell_8hpp.html">Cell.hpp</a></code>, but do <em>not</em> delete anything from it. Replace the files <code>Cell.cpp</code>, <code>Node.cpp</code> and <code><a class="el" href="linkedlist_8cpp.html">linkedlist.cpp</a></code> with your own implementations. Depending on your approach, you may or may not also wish to add more files.<p>
Depending on your approach, you may or may not need to change the <code>Makefile</code>. Whether you changed it or not, always make sure you include whatever <code>Makefile</code> is needed to build your program, when you submit the assignment. Otherwise, the graders cannot build your program.<p>
Documentation is also a critically important part of your software engineering. Your use of <code>doxygen</code> comments, as in Lab 3, will be graded.<p>
You must write the final version of the program on your own. Sophisticated plagiarism detection systems are in operation, and they are pretty good at catching copying! If you worked in study groups, you must also acknowledge your collaborators in the write-up for each problem, whether or not they are classmates. Other cases will be dealt with as plagiarism. Re-read the policy on the course home page, and note the University's tougher policy this year regarding cheating.<p>
Your programming style (how clearly and how well you speak C++) is what will be graded. Correct functioning of your program is necessary but not sufficient!<p>
<h3>Grading scheme</h3>
<p>
Below is the <b>grading sheet</b> that will be used by the graders, so you can see what software engineering skills they're checking you for.<p>
Your grade consists of two parts: (1) <b>program correctness</b>, worth 60%. and (2) <b>style &amp; design</b>, worth 40%. Points are deducted for the error types as shown (but the minimum you can get for each part is 0%, so you cannot get negative point scores on either program correctness or style &amp; design).<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b>Name:</b>  </td><td>   </td></tr>
<tr>
<td><b>Email:</b>  </td><td>   </td></tr>
<tr>
<td><b>Submission Time: </b> </td><td>   </td></tr>
<tr>
<td><b>Late Penalty:</b>  </td><td>   </td></tr>
<tr>
<td><b>Total Pts: </b> </td><td>                       / 100 Pts  </td></tr>
</table>
<p>
<table border="2" cellspacing="3" cellpadding="3">
<tr>
<td colspan="3"><b>PROGRAM CORRECTNESS</b> (Maximum: 60 Pts; Minimum: 0 Pts)  </td></tr>
<tr>
<td><em>Description</em> </td><td><em>Pts</em> </td><td><em>Notes</em>  </td></tr>
<tr>
<td>Base Pts. (+60 Pts) </td><td>          </td><td>                         </td></tr>
<tr>
<td>Program fails to compile. (-60 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td><a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a> class fails (link against reference solution and run tests) (-60 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>does not pass simple test cases. (-15 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>does not pass general test cases. (-15 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>does not handle semantically invalid cases. (-15 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Program prints irrelevant information. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Encapsulation (Min -40 Pts) <ul>
<li>
Edited <a class="el" href="Cell_8hpp.html">Cell.hpp</a>, <a class="el" href="Node_8hpp.html">Node.hpp</a>, or <a class="el" href="linkedlist_8hpp.html">linkedlist.hpp</a>. (-40 Pts) </li>
<li>
Accessed functions in the <a class="el" href="structCell.html" title="Tagged union that holds an int, double, or symbol.">Cell</a> class directly. (-30 Pts) </li>
</ul>
</td><td>  </td><td>   </td></tr>
<tr>
<td>Proper destruction (+10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>BONUS: Detailed error messages (+5 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>  </td><td>  </td><td>   </td></tr>
<tr>
<td colspan="2"><b>STYLE &amp; DESIGN</b> (Maximum: 40 Pts; Minimum: -100 Pts) </td><td></td></tr>
<tr>
<td><em>Description</em> </td><td><em>Pts</em> </td><td><em>Notes</em>  </td></tr>
<tr>
<td>Base Pts. (+40 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>No Doxygen output. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Inadequate function level documentation. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Inadequate algorithm level (i.e. within function) documentation. (-15 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Inadequate variable level documentation (i.e. meaning of the variable). (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Poor readability of function and variable names. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Improper use of indentation and space. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Inconsistent naming of functions and variables. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Incorrect ‘const’ usage. (-10 Pts) </td><td>  </td><td>   </td></tr>
<tr>
<td>Improper private data encapsulation. (-10 Pts) </td><td>  </td><td>   </td></tr>
</table>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Sep 5 15:59:46 2014 for COMP2012H by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
